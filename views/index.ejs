<div class="hero">
  <h2>Welcome to ListYourAIGames.com!</h2>
  <p>Discover and share AI-generated mini games in retro style</p>
  <a href="/games/new" class="btn btn-primary">Add your game</a>
</div>

<div class="games-container">
  <% if (games && games.length > 0) { %> <% games.forEach(game => { %>
  <div class="game-card">
    <div class="game-image">
      <img src="<%= game.imageUrl %>" alt="<%= game.title %>" />
      <div class="placeholder-image"><%= game.title %></div>
      <form
        action="/games/<%= game._id %>/update-image"
        method="POST"
        enctype="multipart/form-data"
        class="update-image-form"
      >
        <input type="file" name="image" accept="image/*" class="image-input" />
        <button type="submit" class="btn btn-small">Bild √§ndern</button>
      </form>
    </div>
    <div class="game-info">
      <h3>
        <a href="/games/<%= game._id %>/play"><%= game.title %></a>
      </h3>
      <p class="game-description"><%= game.description %></p>
      <% if (game.xProfile) { %>
      <p class="x-profile">
        <a
          href="https://x.com/<%= game.xProfile.replace('@', '') %>"
          target="_blank"
        >
          <span class="x-logo"></span>
          <%= game.xProfile %>
        </a>
      </p>
      <% } %>
      <div class="game-votes">
        <form
          action="/games/<%= game._id %>/upvote"
          method="POST"
          class="vote-form"
        >
          <button type="submit" class="vote-btn upvote">üëç</button>
        </form>
        <span class="vote-count"><%= game.votes %></span>
        <form
          action="/games/<%= game._id %>/downvote"
          method="POST"
          class="vote-form"
        >
          <button type="submit" class="vote-btn downvote">üëé</button>
        </form>
      </div>
      <a href="/games/<%= game._id %>/play" class="btn btn-play">Play</a>
    </div>
  </div>
  <% }); %> <% } else { %>
  <div class="no-games">
    <p>No games available yet. Be the first to add a game!</p>
    <a href="/games/new" class="btn btn-primary">Add a game</a>
  </div>
  <% } %>
</div>

<style>
  .update-image-form {
    position: absolute;
    bottom: 5px;
    left: 5px;
    right: 5px;
    background: rgba(0, 0, 0, 0.8);
    padding: 5px;
    border-radius: 3px;
    display: none;
  }

  .game-image:hover .update-image-form {
    display: block;
  }

  .image-input {
    width: 100%;
    margin-bottom: 5px;
    color: #00ff00;
    font-family: "Press Start 2P", cursive;
    font-size: 8px;
  }

  .btn-small {
    font-size: 8px;
    padding: 3px 6px;
    background: #00ff00;
    color: black;
    border: none;
    cursor: pointer;
    font-family: "Press Start 2P", cursive;
  }

  .btn-small:hover {
    background: #00cc00;
  }
</style>
